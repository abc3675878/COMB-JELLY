(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard_coupon"],{"0de7":function(t,e,a){"use strict";a("da22")},da22:function(t,e,a){},f43e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("優惠券")]),t._m(0),a("div",{staticClass:"collapse createConfirm",attrs:{id:"collapseExample"}},[a("div",{staticClass:"card card-body"},[a("form",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券名稱"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.percent,expression:"percent"}],staticClass:"form-control",attrs:{type:"text",placeholder:"折數"},domProps:{value:t.percent},on:{input:function(e){e.target.composing||(t.percent=e.target.value)}}})]),a("div",{staticClass:"col d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券代碼"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("div",{staticClass:"custom-control custom-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.is_enabled,expression:"is_enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch1"},domProps:{checked:Array.isArray(t.is_enabled)?t._i(t.is_enabled,null)>-1:t.is_enabled},on:{change:function(e){var a=t.is_enabled,s=e.target,o=!!s.checked;if(Array.isArray(a)){var c=null,i=t._i(a,c);s.checked?i<0&&(t.is_enabled=a.concat([c])):i>-1&&(t.is_enabled=a.slice(0,i).concat(a.slice(i+1)))}else t.is_enabled=o}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch1"}},[t._v("啟用")])])]),a("div",{staticClass:"col d-flex align-items-center justify-content-center flex-column"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],attrs:{id:"date",type:"datetime-local"},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}}),a("label",{attrs:{for:"date"}},[t._v("到期日")])]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.createCoupon}},[t._v(" 新增 ")])])])])])]),a("hr"),a("table",{staticClass:"table"},[t._m(1),t._l(this.couponList.coupons,(function(e){return a("tbody",{key:e.id},[a("tr",[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.code))]),a("td",[t._v(t._s(e.percent))]),a("td",[a("div",{staticClass:"custom-control custom-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_enabled,expression:"item.is_enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch2"},domProps:{checked:Array.isArray(e.is_enabled)?t._i(e.is_enabled,null)>-1:e.is_enabled},on:{change:function(a){var s=e.is_enabled,o=a.target,c=!!o.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);o.checked?n<0&&t.$set(e,"is_enabled",s.concat([i])):n>-1&&t.$set(e,"is_enabled",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(e,"is_enabled",c)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch2"}})])]),a("td",[t._v(t._s(e.due_date))]),a("td",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"collapse","data-target":"#"+e.id}},[t._v(" 修改 ")])])]),a("tr",[a("td",{staticClass:"border-0",attrs:{colspan:"6"}},[a("div",{staticClass:"collapse updateConfirm",attrs:{id:e.id}},[a("div",{staticClass:"card card-body"},[a("form",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(a){return t.deleteCoupon(e.id)}}},[a("span",{staticClass:"font-weight-bold",attrs:{"aria-hidden":"true"}},[t._v("× 刪除")])])]),a("div",{staticClass:"col d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券名稱"},domProps:{value:e.title},on:{input:function(a){a.target.composing||t.$set(e,"title",a.target.value)}}})]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.percent,expression:"item.percent"}],staticClass:"form-control",attrs:{type:"text",placeholder:"折數"},domProps:{value:e.percent},on:{input:function(a){a.target.composing||t.$set(e,"percent",a.target.value)}}})]),a("div",{staticClass:"col d-flex align-items-center justify-content-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"item.code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券代碼"},domProps:{value:e.code},on:{input:function(a){a.target.composing||t.$set(e,"code",a.target.value)}}})]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("div",{staticClass:"custom-control custom-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_enabled,expression:"item.is_enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"check"+e.id},domProps:{checked:Array.isArray(e.is_enabled)?t._i(e.is_enabled,null)>-1:e.is_enabled},on:{change:function(a){var s=e.is_enabled,o=a.target,c=!!o.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);o.checked?n<0&&t.$set(e,"is_enabled",s.concat([i])):n>-1&&t.$set(e,"is_enabled",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(e,"is_enabled",c)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"check"+e.id}},[t._v("啟用")])])]),a("div",{staticClass:"col d-flex align-items-center justify-content-center flex-column"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.due_date,expression:"item.due_date"}],attrs:{id:"date"+e.id,type:"datetime-local"},domProps:{value:e.due_date},on:{input:function(a){a.target.composing||t.$set(e,"due_date",a.target.value)}}}),a("label",{attrs:{for:"date"+e.id}},[t._v("到期日")])]),a("div",{staticClass:"col-1 d-flex align-items-center justify-content-center"},[a("button",{staticClass:"btn btn-dark",attrs:{type:"submit"},on:{click:function(a){return t.updateCoupon(e)}}},[t._v(" 確認 ")])])])])])])])])])}))],2)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-right"},[a("a",{staticClass:"btn btn-primary",attrs:{"data-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" 新增優惠券 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("優惠券名稱")]),a("th",{attrs:{scope:"col"}},[t._v("優惠券代碼")]),a("th",{attrs:{scope:"col"}},[t._v("折數(百分比)")]),a("th",{attrs:{scope:"col"}},[t._v("是否啟用")]),a("th",{attrs:{scope:"col"}},[t._v("到期時間")]),a("th",{attrs:{scope:"col"}},[t._v("修改")])])])}],c=(a("99af"),a("1157")),i=a.n(c),n={data:function(){return{title:"",is_enabled:1,percent:0,due_date:"",code:"",couponList:{}}},methods:{createCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/admin/coupon"),a={title:this.title,is_enabled:this.is_enabled,percent:this.percent,due_date:this.due_date,code:this.code};this.$http.post(e,{data:a}).then((function(e){i()(".createConfirm").collapse("hide"),console.log("新增優惠券",e.data),t.getCoupon(),t.title="",t.is_enabled="",t.percent="",t.due_date="",t.code=""}))},updateCoupon:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/admin/coupon/").concat(t.id);this.$http.put(a,{data:t}).then((function(t){console.log("修改優惠券",t.data),i()(".updateConfirm").collapse("hide"),e.getCoupon()}))},deleteCoupon:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/admin/coupon/").concat(t);this.$http.delete(a).then((function(t){console.log("刪除優惠券",t.data),e.getCoupon()}))},getCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/admin/coupons?page=1");this.$http.get(e).then((function(e){console.log("取得優惠券列表",e.data),t.couponList=e.data}))}},created:function(){this.getCoupon()}},l=n,r=(a("0de7"),a("2877")),d=Object(r["a"])(l,s,o,!1,null,"6761530c",null);e["default"]=d.exports}}]);
//# sourceMappingURL=dashboard_coupon.728688d1.js.map