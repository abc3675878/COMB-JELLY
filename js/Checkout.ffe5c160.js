(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Checkout"],{2945:function(t,e,a){},3284:function(t,e,a){"use strict";a("2945")},"7cb4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[t._m(0),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-7 px-4 py-3 py-sm-0 d-flex align-content-center justify-content-between flex-column"},[a("p",{staticStyle:{"font-size":"20px"}},[t._v("SHIPPING INFORMATION")]),a("div",{staticClass:"w-100 mt-3"},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"d-flex justify-content-between p-0 m-0",attrs:{for:"Email"}},[a("p",[t._v("Email *")]),s?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"w-100",attrs:{type:"text",id:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]}}],null,!0)})],1),a("div",{staticClass:"w-100 mt-3"},[a("ValidationProvider",{attrs:{name:"Full Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"d-flex justify-content-between p-0 m-0",attrs:{for:"fullName"}},[a("p",[t._v("Full Name *")]),s?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fullName,expression:"fullName"}],staticClass:"w-100",attrs:{type:"text",id:"fullName"},domProps:{value:t.fullName},on:{input:function(e){e.target.composing||(t.fullName=e.target.value)}}})]}}],null,!0)})],1),a("div",{staticClass:"w-100 mt-3"},[a("ValidationProvider",{attrs:{name:"Address",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"d-flex justify-content-between p-0 m-0",attrs:{for:"address"}},[a("p",[t._v("Address *")]),s?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"w-100",attrs:{type:"text",id:"address"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]}}],null,!0)})],1),a("div",{staticClass:"w-100 mt-3"},[a("ValidationProvider",{attrs:{name:"Phone Number",rules:"digits:10|required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"d-flex justify-content-between p-0 m-0",attrs:{for:"Phone Number"}},[a("p",[t._v("Phone Number *")]),s?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],staticClass:"w-100",attrs:{type:"text",maxlength:"10",id:"Phone Number"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}})]}}],null,!0)})],1),a("div",{staticClass:"w-100 mt-3"},[a("label",{attrs:{for:"Special Instructions"}},[t._v("Special Instructions")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.specialInstructions,expression:"specialInstructions"}],staticClass:"w-100",attrs:{id:"Special Instructions",cols:"30",rows:"5"},domProps:{value:t.specialInstructions},on:{input:function(e){e.target.composing||(t.specialInstructions=e.target.value)}}})])]),a("div",{staticClass:"col-12 col-md-5 bg_grey d-flex justify-content-between flex-column py-4 px-4 h-100",staticStyle:{"max-height":"600px"}},[a("loading",{attrs:{active:t.isLoading,"is-full-page":!1,opacity:.8,"can-cancel":!0,loader:"bars"},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"cart-content h-75"},t._l(t.cart.data.carts,(function(e){return a("div",{key:e.id,staticClass:"cart-product d-flex mb-3"},[a("div",{staticClass:"cart-img"},[a("img",{attrs:{src:e.product.imageUrl,alt:""}})]),a("div",{staticClass:"cart-details d-flex flex-column justify-content-between"},[a("div",{staticClass:"product-title",staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(e.product.title)+" ")]),a("div",{staticClass:"product-size"},[t._v(t._s(e.product_size))]),a("div",{staticClass:"product-bottom d-flex align-items-center justify-content-end"},[a("div",{staticClass:"product-price "},[t._v(" "+t._s(t._f("currency")(e.product.price))+" ")])])])])})),0),a("hr"),a("div",{staticClass:"cart-bottom h-25"},[t.cart.data.total===t.cart.data.final_total?a("div",{staticClass:"cart-price d-flex justify-content-between"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.discountCode,expression:"discountCode"}],staticClass:"w-75",attrs:{type:"text",placeholder:"Discount Code"},domProps:{value:t.discountCode},on:{input:function(e){e.target.composing||(t.discountCode=e.target.value)}}}),a("button",{staticClass:"w-25",staticStyle:{"font-size":"12px"},on:{click:t.addDiscount}},[t._v(" APPLY ")])]):a("div",{staticClass:"w-100 bg-danger text-center p-1"},[a("span",{staticClass:"text-white"},[t._v("已套用優惠券 "+t._s(t.cart.data.carts[0].coupon.code))])]),a("hr"),a("div",{staticClass:"cart-price d-flex justify-content-between"},[a("p",[t._v("Subtotal")]),a("p",[t._v(t._s(t._f("currency")(t.cart.data.total)))])]),t.cart.data.total!==t.cart.data.final_total?a("div",{staticClass:"cart-price d-flex justify-content-between"},[a("p",{staticStyle:{color:"#ff0000"}},[t._v("Discount")]),a("p",{staticStyle:{color:"#ff0000"}},[t._v("- "+t._s(t._f("currency")(t.discountValue)))])]):t._e(),a("div",{staticClass:"cart-price d-flex justify-content-between"},[a("p",[t._v("Total")]),a("p",[t._v(t._s(t._f("currency")(t.cart.data.final_total)))])]),a("button",{class:{disabledBtn:s},attrs:{disabled:s},on:{click:t.placeOrder}},[t.cart_loading?a("div",{staticClass:"spinner-border text-light",staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("div",{staticClass:"h-100 d-flex align-items-center justify-content-center",class:{disabledBtn:s},staticStyle:{color:"white"},attrs:{disabled:s}},[t._v(" PLACE ORDER ")])])])],1)])]}}])}),t._m(1)],1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row my-5"},[s("div",{staticClass:"col-sm-12"},[s("img",{staticStyle:{display:"block",margin:"auto"},attrs:{src:a("f829"),width:"200px"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col my-5"})])}],n=(a("a9e3"),a("5319"),a("ac1f"),a("b680"),a("9062")),r=a.n(n),c=(a("e40d"),{components:{Loading:r.a},data:function(){return{isLoading:!1,cart_loading:!1,cart:{data:{carts:[],total:0}},email:"",fullName:"",address:"",phoneNumber:"",specialInstructions:"",discountCode:"",discountConfirm:{}}},filters:{currency:function(t){var e=Number(t);return"¥ ".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))}},computed:{discountValue:function(){return this.cart.data.total-this.cart.data.final_total}},methods:{placeOrder:function(){var t=this;this.cart_loading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/order"),a={user:{name:this.fullName,email:this.email,tel:this.phoneNumber,address:this.address},message:this.specialInstructions};this.$http.post(e,{data:a}).then((function(e){console.log("送出訂單",e.data);var a=e.data.orderId;e.data.success&&t.$router.push({name:"Order",params:{id:a}})}))},getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/cart");this.$http.get(e).then((function(e){t.isLoading=!1,console.log("取得購物車",e.data),t.cart=e.data}))},addDiscount:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/abc3675878/coupon"),a={code:this.discountCode};this.$http.post(e,{data:a}).then((function(e){t.isLoading=!1,console.log("套用優惠券",e.data),t.discountConfirm=e.data,t.getCart()}))}},created:function(){this.getCart()}}),o=c,l=(a("3284"),a("2877")),d=Object(l["a"])(o,s,i,!1,null,"5007ff74",null);e["default"]=d.exports}}]);
//# sourceMappingURL=Checkout.ffe5c160.js.map